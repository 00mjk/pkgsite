<!--
        Copyright 2019 The Go Authors. All rights reserved.
        Use of this source code is governed by a BSD-style
        license that can be found in the LICENSE file.
-->
{{define "main_content"}}
<div class="Container">
  {{$header := .Header}}
  {{$namespace := .Namespace}}
  <header>
    <h1 class="Header-title">
      {{- if eq $header.Path "std" -}}
        The Go Standard Library
      {{- else if eq $namespace "mod" -}}
        module {{$header.Path}}
      {{- else -}}
        {{$header.Path}}
      {{- end}}</h1>
    <p class="InfoLabel">
      {{if eq $namespace "pkg"}}
        <strong class="InfoLabel-title">Module: </strong>
        <a href="/mod/{{$header.Module.Path}}@{{$header.Version}}">
          {{if eq $header.Module.Path "std"}}
            Standard library
          {{else}}
            {{$header.Module.Path}}
          {{end}}
        </a>
        <span class="InfoLabel-divider">|</span>
      {{end}}
      <strong class="InfoLabel-title">Version:</strong> {{$header.Version}}
      <span class="InfoLabel-divider">|</span>
      <strong class="InfoLabel-title">Published:</strong> {{$header.CommitTime}}
      <span class="InfoLabel-divider">|</span>
      <strong class="InfoLabel-title">{{pluralize (len $header.Licenses) "License"}}: </strong>
      {{range $i, $e := $header.Licenses -}}{{if $i}}, {{end}}
        <a href="/{{$namespace}}/{{$header.Path}}@{{$header.Version}}?tab=licenses#{{.Anchor}}">{{$e.Type}}</a>
      {{- else -}}
        <span>No license files detected</span>
        <a href="/license-policy" class="Disclaimer-link"><em>not legal advice</em></a>
      {{- end}}
      {{if $header.RepositoryURL}}
        <span class="InfoLabel-divider">|</span>
        <a href="{{$header.RepositoryURL}}">Source Code</a>
      {{end}}
    </p>
  </header>

  <nav class="DetailsNav js-modulesNav">
    <ul class="DetailsNav-list" role="tablist">
      {{range .Tabs}}
        <li class="DetailsNav-tab{{if eq .Name $.Settings.Name}} selected{{end}}" role="presentation">
          <a class="DetailsNav-link" href="/{{$namespace}}/{{$header.Path}}@{{$header.Version}}?tab={{.Name}}" role="tab" aria-selected="{{if eq .Name $.Settings.Name}}true{{else}}false{{end}}">
            {{.DisplayName}}
          </a>
        </li>
      {{end}}
    </ul>
  </nav>

  <div class="Content">
    {{if .CanShowDetails -}}
      {{template "details_content" .Details}}
    {{- else}}
      <h2>“{{.Settings.DisplayName}}” hidden due to license restrictions.</h2>
    {{end}}
  </div>
</div>
{{end}}

{{define "post_content"}}
<script nonce="{{.Nonce}}">
const navEl = document.querySelector('.js-modulesNav');
const selectedEl = navEl.querySelector(`[aria-selected='true']`);
if (selectedEl.offsetLeft + selectedEl.offsetWidth > navEl.offsetWidth) {
  navEl.scrollLeft = selectedEl.offsetLeft;
}
</script>
{{end}}
