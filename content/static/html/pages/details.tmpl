<!--
        Copyright 2019 The Go Authors. All rights reserved.
        Use of this source code is governed by a BSD-style
        license that can be found in the LICENSE file.
-->
{{define "main_content"}}
<div class="Container">
  {{$header := .Header}}
  {{$namespace := .Namespace}}
  <header>
    <h1 class="Header-title">
      {{- if eq $header.Path "std" -}}
        The Go Standard Library
      {{- else if eq $namespace "mod" -}}
        module {{$header.Path}}
      {{- else -}}
        {{$header.Path}}
      {{- end}}</h1>
    <p class="Header-labels">
      <strong>Version: </strong><span>{{$header.Version}}</span>
      <span class="Header-verticalBar">|</span>
      <strong>Published: </strong><span>{{$header.CommitTime}}</span>
      <span class="Header-verticalBar">|</span>
      <strong>{{pluralize (len $header.Licenses) "License"}}: </strong>
      {{range $i, $e := $header.Licenses -}}{{if $i}}, {{end}}
        <a href="/{{$namespace}}/{{$header.Path}}@{{$header.Version}}?tab=licenses#{{.Anchor}}">{{$e.Type}}</a>
      {{- else -}}
        <span>No license files detected</span>
        <a href="/license-policy" class="Disclaimer-link"><em>not legal advice</em></a>
      {{- end}}
      {{if $header.RepositoryURL}}
        <span class="Header-verticalBar">|</span>
        <a href="{{$header.RepositoryURL}}">Source Code</a>
      {{end}}
    </p>
  </header>

  <nav class="ModulesNav js-modulesNav">
    <ul class="ModulesNav-list" role="tablist">
      {{range .Tabs}}
        <li class="ModulesNav-tab" role="presentation" {{if eq .Name $.Settings.Name}}aria-selected="true"{{end}}>
          <a class="ModulesNav-link" href="/{{$namespace}}/{{$header.Path}}@{{$header.Version}}?tab={{.Name}}" role="tab">{{.DisplayName}}</a>
        </li>
      {{end}}
    </ul>
  </nav>

  <div class="Content">
    {{if .CanShowDetails -}}
      {{template "details_content" .Details}}
    {{- else}}
      <h2>“{{.Settings.DisplayName}}” hidden due to license restrictions.</h2>
    {{end}}
  </div>
</div>
{{end}}

{{define "post_content"}}
<script nonce="{{.Nonce}}">
const navEl = document.querySelector('.js-modulesNav');
const selectedEl = navEl.querySelector(`[aria-selected='true']`);
if (selectedEl.offsetLeft + selectedEl.offsetWidth > navEl.offsetWidth) {
  navEl.scrollLeft = selectedEl.offsetLeft;
}
</script>
{{end}}
