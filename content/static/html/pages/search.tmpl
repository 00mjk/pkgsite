<!--
  Copyright 2019 The Go Authors. All rights reserved.
  Use of this source code is governed by a BSD-style
  license that can be found in the LICENSE file.
-->

{{define "main_content"}}
  <div class="SearchResults">
    <h1 class="SearchResults-header">Results for “{{.Query}}”</h1>
    <div class="SearchResults-resultCount">
      {{if gt .TotalCount .ResultCount}}
        {{add .Offset 1}} – {{add .Offset .ResultCount}} of
      {{end}}
      {{.TotalCount}} {{pluralize .TotalCount "result"}}
    </div>
    <div>{{/* Containing element is needed to use *-of-type selectors */}}
      {{$query := .Query}}
      {{range .Results}}
        <div class="SearchSnippet">
          <h1 class="SearchSnippet-header">
            <a href="/pkg/{{.PackagePath}}{{if $query}}?q={{$query}}{{end}}">{{.PackagePath}}</a>
          </h1>
          <p class="SearchSnippet-synopsis">{{.Synopsis}}</p>
          <div class="SearchSnippet-subtext">
            <b class="SearchSnippet-subtextTitle">Version:</b> {{.Version}}
            <span class="SearchSnippet-subtextDivide">|</span>
            <b class="SearchSnippet-subtextTitle">{{pluralize (len .Licenses) "License"}}:</b>
            {{if .Licenses}}
              {{range $i, $e := .Licenses -}}{{if $i}}, {{end}} {{$e}} {{end}}
            {{else}}
              <span>N/A</span>
            {{end}}
          </div>
          <div class="SearchSnippet-subtext">
            <b class="SearchSnippet-subtextTitle">Imported by:</b> {{.NumImportedBy}}
            <span class="SearchSnippet-subtextDivide">|</span>
            <b class="SearchSnippet-subtextTitle">Published:</b> {{.CommitTime}}
          </div>
        </div>
      {{end}}
    </div>
    <div class="SearchResults-nav">
      <div class="SearchResults-navInner">
        {{if .PrevPage}}
          <a class="SearchResults-previous" href="/search?q={{.Query}}&page={{.PrevPage}}">Previous</a>
        {{else}}
          <span class="SearchResults-previous" aria-disabled="true">Previous</span>
        {{end}}

        {{$page := .Page}}
        {{range $i := .Pages}}
          {{if eq $i $page}}
            <span>{{$i}}</span>
          {{else}}
            <a href="/search?q={{$.Query}}&page={{$i}}">{{$i}}</a>
          {{end}}
        {{end}}

        {{if .NextPage}}
          <a class="SearchResults-next" href="/search?q={{.Query}}&page={{.NextPage}}">Next</a>
        {{else}}
          <span class="SearchResults-next" aria-disabled="true">Next</span>
        {{end}}
      </div>
    </div>
  </div>
{{end}}
